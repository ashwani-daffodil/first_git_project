angular.module("ngDraggable",[]).service("ngDraggable",["$window",function(d){var b=function(e){return typeof e!=="undefined"};this.getEventProp=function c(e,g,f){if(b(e.touches)&&e.touches[0]){return e.touches[0][g]}if(b(e[g])){return e[g]}if(e.originalEvent&&!f){return this.getEventProp(e.originalEvent,g,true)}};this.getPrivOffset=function a(e){var f={top:0,left:0};if(b(e[0].getBoundingClientRect)){f=e[0].getBoundingClientRect()}return{top:f.top+d.pageYOffset-e[0].clientTop,left:f.left+d.pageXOffset-e[0].clientLeft}}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(b,c,e,d,a){return{restrict:"A",link:function(B,q,o){B.value=o.ngDrag;var C,i=false,l,k,I,H,M,K;var F=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;var h="touchstart mousedown";var G="touchmove mousemove";var p="touchend mouseup";var v=B.$id;var N=null;var J=null;var f=false;var n=null;var z=c(o.ngDragSuccess)||null;var j=function(){q.attr("draggable","false");L(true)};var L=function(P){if(!P){return}B.$on("$destroy",A);B.$watch(o.ngDrag,t);B.$watch(o.ngCenterAnchor,r);B.$watch(o.ngDragData,O);q.on(h,D);if(!F&&q[0].nodeName.toLowerCase()=="img"){q.on("mousedown",function(){return false})}};var A=function(P){L(false)};var O=function(Q,P){N=Q};var t=function(Q,P){f=(Q)};var r=function(Q,P){if(angular.isDefined(Q)){i=(Q||"true")}};var y=function(P){return(angular.isDefined(angular.element(P.target).attr("ng-click"))||angular.isDefined(angular.element(P.target).attr("ng-dblclick"))||angular.isDefined(angular.element(P.target).attr("ng-cancel-drag")))};var D=function(P){if(!f){return}if(y(P)){return}if(F){w();n=setTimeout(function(){w();m(P)},100);e.on(G,w);e.on(p,w)}else{m(P)}};var w=function(){clearTimeout(n);e.off(G,w);e.off(p,w)};var m=function(P){if(!f){return}P.preventDefault();q.addClass("dragging");C=a.getPrivOffset(q);J=C;q.centerX=q[0].offsetWidth/2;q.centerY=q[0].offsetHeight/2;l=a.getEventProp(P,"pageX");k=a.getEventProp(P,"pageY");M=l-C.left;K=k-C.top;if(i){I=l-q.centerX-d.pageXOffset;H=k-q.centerY-d.pageYOffset}else{I=l-M-d.pageXOffset;H=k-K-d.pageYOffset}e.on(G,x);e.on(p,u);b.$broadcast("draggable:start",{x:l,y:k,tx:I,ty:H,event:P,element:q,data:N})};var x=function(P){if(!f){return}P.preventDefault();l=a.getEventProp(P,"pageX");k=a.getEventProp(P,"pageY");if(i){I=l-q.centerX-J.left;H=k-q.centerY-J.top}else{I=l-M-J.left;H=k-K-J.top}g(I,H);b.$broadcast("draggable:move",{x:l,y:k,tx:I,ty:H,event:P,element:q,data:N,uid:v})};var u=function(P){if(!f){return}P.preventDefault();b.$broadcast("draggable:end",{x:l,y:k,tx:I,ty:H,event:P,element:q,data:N,callback:s,uid:v});q.removeClass("dragging");E();e.off(G,x);e.off(p,u)};var s=function(P){if(!z){return}B.$apply(function(){z(B,{$data:N,$event:P})})};var E=function(){q.css({transform:"","z-index":""})};var g=function(P,Q){q.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+P+", "+Q+", 0, 1)","z-index":99999})};j()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(c,b,d,a){return{restrict:"A",link:function(g,h,r){g.value=r.ngDrop;var n=g.$id;var e=false;var w=c(r.ngDropSuccess);var o=c(r.ngDragStart);var v=c(r.ngDragStop);var q=c(r.ngDragMove);var f=function(){t(true)};var t=function(x){if(!x){return}r.$observe("ngDrop",p);g.$on("$destroy",k);g.$on("draggable:start",l);g.$on("draggable:move",s);g.$on("draggable:end",i)};var k=function(x){t(false)};var p=function(y,x){e=g.$eval(y)};var l=function(x,y){if(!e){return}u(y.x,y.y,y.element);b(function(){o(g,{$data:y.data,$event:y})})};var s=function(x,y){if(!e){return}u(y.x,y.y,y.element);b(function(){q(g,{$data:y.data,$event:y})})};var i=function(x,y){if(!e||n===y.uid){return}if(u(y.x,y.y,y.element)){if(y.callback){y.callback(y)}b(function(){w(g,{$data:y.data,$event:y})})}b(function(){v(g,{$data:y.data,$event:y})});m(false,y.element)};var u=function(A,z,y){var x=j(A,z);m(x,y);return x};var m=function(x,y){if(x){h.addClass("drag-enter");y.addClass("drag-over")}else{h.removeClass("drag-enter");y.removeClass("drag-over")}};var j=function(z,B){var A=a.getPrivOffset(h);A.right=A.left+h[0].offsetWidth;A.bottom=A.top+h[0].offsetHeight;return z>=A.left&&z<=A.right&&B<=A.bottom&&B>=A.top};f()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(c,b,a){return{restrict:"A",link:function(r,k,q){var l,j=true;var n=null;r.clonedData={};var m=function(){l=k.find("img");k.attr("draggable","false");l.attr("draggable","false");o();i(true)};var i=function(s){if(!s){return}r.$on("draggable:start",g);r.$on("draggable:move",f);r.$on("draggable:end",h);p()};var p=function(){l.off("mousedown touchstart touchmove touchend touchcancel",d);l.on("mousedown touchstart touchmove touchend touchcancel",d)};var g=function(s,t,u){j=true;if(angular.isDefined(t.data.allowClone)){j=t.data.allowClone}if(j){r.$apply(function(){r.clonedData=t.data});k.css("width",t.element[0].offsetWidth);k.css("height",t.element[0].offsetHeight);e(t.tx,t.ty)}n=a.getPrivOffset(k)};var f=function(s,t){if(j){_tx=t.tx+n.left;_ty=t.ty+n.top;e(_tx,_ty)}};var h=function(s,t){if(j){o()}};var o=function(){k.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})};var e=function(s,t){k.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+s+", "+t+", 0, 1)","z-index":99999,visibility:"visible"})};var d=function(s){var t=s.originalEvent;t.preventDefault&&t.preventDefault();t.stopPropagation&&t.stopPropagation();t.cancelBubble=true;t.returnValue=false;return false};m()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(b,a){return{restrict:"A",link:function(f,e,d){var c=function(){e.attr("draggable","false");g(true)};var g=function(i){if(!i){return}e.on("mousedown touchstart touchmove touchend touchcancel",h)};var h=function(i){var j=i.originalEvent;j.preventDefault&&j.preventDefault();j.stopPropagation&&j.stopPropagation();j.cancelBubble=true;j.returnValue=false;return false};c()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(c,b,a){b.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);